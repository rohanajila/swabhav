<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../../TodoList/style.css">
    <title>API | fetch student data</title>
</head>
<body>
    
    <!-- <button id="submitBtn">Get student info</button> -->
    <section class="container" id="resultSection">
       <table class="tbl-todo" style="padding: 10px" ,border="10">
        
           <thead>
               <th>id</th>
               <th>name</th>
               <th>email</th>
               <th>roll no</th>
               <th>age</th>
               <th>is Male</th>
               <th>Action</th>
           </th>
           <tbody id="tbody">
               
           </tbody>

       </table>
</section>
</body>
</html>
<script src="jquery-3.6.0.js"></script>
<script>
    $(function () {
    
        
     $.get(`http://gsmktg.azurewebsites.net/api/v1/techlabs/test/students/`,function (data,status) {
        if (status === "success") {
          
            data.map((item)=>{
                console.log(item);

                $("#tbody").append(`<tr>
                    <td>${item.id}</td>
                    <td>${item.name}</td>
                    <td>${item.email}</td>
                    <td>${item.rollNo}</td>
                    <td>${item.age}</td>                   
                    
                    <td>${item.isMale}</td>
                   
                    <td><button onclick=edit(${item.id})>Edit</button></td>
                    <td><button onclick=Delete(${item.id})>Delete</button></td>
                 </tr>`)
            })

        }
      });
    

  });
  function edit(id){
    $.get(`http://gsmktg.azurewebsites.net/api/v1/techlabs/test/students/`,function (data,status) {
        if (status === "success") {
          data.forEach(element => {
              if(element.id==id){

              }
          });
           
                $("#tbody").append(`<tr>
                    <td>${item.id}</td>
                    <td>${item.name}</td>
                    <td>${item.email}</td>
                    <td>${item.rollNo}</td>
                    <td>${item.age}</td>                   
                    
                    <td>${item.isMale}</td>
                   
                    <td><button onclick=update(${item.id})>Update</button></td>
                 </tr>`)
            

        }
      });
      function Delete(id){
    $.delete(`http://gsmktg.azurewebsites.net/api/v1/techlabs/test/students/`,function (data,status) {
        if (status === "success") {
            alert("Record deleted succesfully");
            location.reload();
          };      
      });
  }
</script>